<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="{{ url_for('static', filename='style/index.css') }}">
    <title>Todo List</title>
</head>
<body>
<script>
    // todo move this out, check the messages are rendered
      setTimeout(() => {
        const flashedMessages = document.getElementById('flashed-messages');
        if(flashedMessages) {
            flashedMessages.innerHTML = '';
        }
      }, 3000);
</script>

    <div id="flashed-messages">
        {% with messages = get_flashed_messages() %}
        {% if messages %}
            {{ messages[-1] }}
        {% endif %}
        {% endwith %}
    </div>
    <header>
        <div>TODO App:
        <a href="{{ url_for('index') }}">Home</a>
        {% if current_user.is_anonymous %}
        <a href="{{ url_for('login') }}">Login</a>
        {% else %}
        <a href="{{ url_for('user', username=current_user.username) }}">Your tasks</a>
        <a href="{{ url_for('logout') }}">Logout</a>
        {% endif %}
    </div>
    </header>
    <main>
        {% block main %}
        {% endblock %}
    </main>
</body>
</html>